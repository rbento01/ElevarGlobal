<link href="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/css/tom-select.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/js/tom-select.complete.min.js"></script>
<style type="text/css">
    #main-container {
        padding-top: 10px;
    }

    .inline {
        display: inline;
    }

    .show {
        display: block;
    }

    .hide {
        display: none;
    }

    table {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
            Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue",
            sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

    thead tr th {
        background-color: #fafafa;
    }

    thead tr th:first-child {
        border-left: 1px solid #dddddd;
    }

    thead tr th:last-child {
        border-right: 1px solid #dddddd;
    }

    thead tr:first-child th {
        border-top: 1px solid #dddddd;
        padding-top: 8px;
        cursor: pointer;
    }

    thead tr:first-child th div {
        display: flex;
        flex-wrap: nowrap;
        justify-content: space-between;
    }

    thead tr:last-child th {
        border-bottom: 1px solid #dddddd;
    }

    thead tr,
    thead th {
        text-align: left;
        padding-left: 8px;
        padding-right: 8px;
        color: #757575;
        font-weight: normal;
    }

    tbody tr,
    tbody td {
        text-align: left;
        font-weight: normal;

        border: 1px solid #dddddd;
    }

    tbody tr:hover {
        background-color: #cfd8dc55;
    }

    .column-filter,
    .column-vars-filter {
        /* width: 100%;
	background-color: #fafafa;
	border: 0px solid #cccccc;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 12px;
	font-weight: normal;
	padding: 5px;
	color: #999999; */
        width: 100%;
        height: 5rem;
        border-radius: 10px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        border: none;
        outline-color: #4086d1
    }

    .column-filter:focus,
    .column-filter-date:focus,
    .column-vars-filter:focus,
    .column-vars-filter-date:focus {
        outline: none;
    }

    .column-filterEntregas,
    .column-vars-filterEntregas {
        /* width: 100%;
	background-color: #fafafa;
	border: 0px solid #cccccc;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 12px;
	font-weight: normal;
	padding: 5px;
	color: #999999; */
        width: 100%;
        height: 5rem;
        border-radius: 10px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        border: none;
        outline-color: #4086d1
    }

    .column-filterEntregas:focus,
    .column-filter-dateEntregas:focus,
    .column-vars-filterEntregas:focus,
    .column-vars-filter-dateEntregas:focus {
        outline: none;
    }

    .column-filterPendentes,
    .column-vars-filterPendentes {
        /* width: 100%;
	background-color: #fafafa;
	border: 0px solid #cccccc;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 12px;
	font-weight: normal;
	padding: 5px;
	color: #999999; */
        width: 100%;
        height: 5rem;
        border-radius: 10px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        border: none;
        outline-color: #4086d1
    }

    .column-filterPendentes:focus,
    .column-filter-datePendentes:focus,
    .column-vars-filterPendentes:focus,
    .column-vars-filter-datePendentes:focus {
        outline: none;
    }

    .input-date {
        /* width: 100%;
	position: relative;
	background-color: #fafafa;
	border: 0px solid #cccccc;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 12px;
	font-weight: normal;
	padding: 5px;
	color: #999999; */
        width: 100%;
        height: 5rem;
        border-radius: 10px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        border: none;
        outline-color: #4086d1
    }

    .input {
        width: 100%;
        height: 5rem;
        border-radius: 10px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        border: none;
        outline-color: #4086d1
    }

    .column-filter-date {
        /* background-color: #fafafa;
	border: 0px solid #cccccc;
	color: #999999;
	padding: 0px; */
        width: 100%;
        height: 5rem;
        border-radius: 10px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        border: none;
        outline-color: #4086d1
    }

    .btn-no-background {
        background-color: transparent;
        color: #999999;
        background-repeat: no-repeat;
        border: none;
        cursor: pointer;
        overflow: hidden;
        outline: none;
        position: absolute;
        right: 0;
    }

    .btn-no-background:hover {
        color: #757575;
    }

    .dropdown-datafilter-content {
        display: none;
        position: absolute;
        right: 0;
        background-color: #ffffff;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.5);
        z-index: 1;
        padding: 15px;
    }

    .input-daterange {
        display: flex;
        flex-wrap: nowrap;
        justify-content: space-between;
    }

    .dropdown-datafilter-content span {
        background-color: transparent;
        border: none;
    }

    .input-daterange label {
        font-size: 12px;
        color: #808080;
    }

    .input-daterange input {
        font-size: 12px;
        font-weight: 500;
        border: 1px solid #a7b1c288;
        color: #808080;
        border-radius: 5px;
        max-width: 115px;
    }

    .datefilters-buttongroup button {
        display: block;
        width: 100%;
        border-radius: 5px;
        background-color: none;
        border: 1px solid #a7b1c288;
        font-weight: 500;
        padding: 5px;
        color: #808080;
        align-self: center;
        margin-top: 10px;
    }

    .datefilters-buttongroup>div {
        width: 100%;
        display: flex;
    }

    .datefilters-buttongroup>div>button {
        display: inline;
    }

    ::placeholder {
        /* Chrome, Firefox, Opera, Safari 10.1+ */
        color: #cccccc;
        opacity: 1;
        /* Firefox */
    }

    :-ms-input-placeholder {
        /* Internet Explorer 10-11 */
        color: #cccccc;
    }

    ::-ms-input-placeholder {
        /* Microsoft Edge */
        color: #cccccc;
    }

    .modal-input-container {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 100px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        overflow-y: initial;
        background-color: rgb(0, 0, 0);
        background-color: rgba(0, 0, 0, 0.6);
    }

    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 40%;
        overflow-y: auto;
    }

    .btn_verde {
        background: #47cf73;
        border: 1px solid #47cf73;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
        box-sizing: border-box;
        color: #ffffff;
        cursor: pointer;
        display: inline-block;
        font-family: nunito, roboto, proxima-nova, "proxima nova", sans-serif;
        font-size: 16px;
        font-weight: 800;
        line-height: 16px;
        min-height: 40px;
        outline: 0;
        padding: 12px 14px;
        text-align: center;
        text-rendering: geometricprecision;
        text-transform: none;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        vertical-align: middle;
    }

    .btn_verde:hover {
        background-color: initial;
        background-position: 0 0;
        color: #47cf73;
    }

    .btn_cor {

        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
        box-sizing: border-box;
        color: #ffffff;
        cursor: pointer;
        display: inline-block;
        font-family: nunito, roboto, proxima-nova, "proxima nova", sans-serif;
        font-size: 16px;
        font-weight: 800;
        line-height: 16px;
        min-height: 40px;
        outline: 0;
        padding: 12px 14px;
        text-align: center;
        text-rendering: geometricprecision;
        text-transform: none;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        vertical-align: middle;
    }

    .btn_cor:hover {
        background-color: white;
        background-position: 0 0;
        color: #ffffff;
    }

    .btn_azul {
        background: #506ce8;
        border: 1px solid #506ce8;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
        box-sizing: border-box;
        color: #ffffff;
        cursor: pointer;
        display: inline-block;
        font-family: nunito, roboto, proxima-nova, "proxima nova", sans-serif;
        font-size: 16px;
        font-weight: 800;
        line-height: 16px;
        min-height: 40px;
        outline: 0;
        padding: 12px 14px;
        text-align: center;
        text-rendering: geometricprecision;
        text-transform: none;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        vertical-align: middle;
    }

    .btn_azul1 {
        background: #506ce8;
        border: 1px solid #506ce8;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
        box-sizing: border-box;
        color: #ffffff;
        cursor: pointer;
        display: inline-block;
        font-family: nunito, roboto, proxima-nova, "proxima nova", sans-serif;
        font-size: 16px;
        font-weight: 800;
        line-height: 16px;
        min-height: 40px;
        outline: 0;
        padding: 12px 14px;
        text-align: center;
        text-rendering: geometricprecision;
        text-transform: none;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        vertical-align: middle;
    }

    .btn_azul:hover {
        background-color: initial;
        background-position: 0 0;
        color: #506ce8;
    }

    .btn_vermelho {

        background: #ff3c41;
        border: 1px solid #ff3c41;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
        box-sizing: border-box;
        color: #FFFFFF;
        cursor: pointer;
        display: inline-block;
        font-family: nunito, roboto, proxima-nova, "proxima nova", sans-serif;
        font-size: 16px;
        font-weight: 800;
        line-height: 16px;
        min-height: 40px;
        outline: 0;
        padding: 12px 14px;
        text-align: center;
        text-rendering: geometricprecision;
        text-transform: none;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        vertical-align: middle;


    }

    .btn_vermelho:hover {
        background-color: initial;
        background-position: 0 0;
        color: #ff3c41;

    }

    .btn_azulesc {
        background: #1e2d84;
        border: 1px solid #1e2d84;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
        box-sizing: border-box;
        color: #ffffff;
        cursor: pointer;
        display: inline-block;
        font-family: nunito, roboto, proxima-nova, "proxima nova", sans-serif;
        font-size: 16px;
        font-weight: 800;
        line-height: 16px;
        min-height: 40px;
        outline: 0;
        padding: 12px 14px;
        text-align: center;
        text-rendering: geometricprecision;
        text-transform: none;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        vertical-align: middle;
    }

    .btn_azulesc:hover {
        background-color: initial;
        background-position: 0 0;
        color: #1e2d84;
    }

    tfoot tr td {
        background-color: #fafafa;
        border: 1px solid #dddddd;
        padding: 5px;
        text-align: right;
    }

    #footer-span,
    #footer-span * {
        font-size: 14px;
        font-weight: normal !important;
    }

    #footer-span>* {
        margin-left: 10px;
        text-align: center;
    }

    #footer-span input[type="number"] {
        width: 35px;
        border: 1px solid #dddddd;
        text-align: center;
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    input[type="number"] {
        -moz-appearance: textfield;
        appearance: textfield;
    }

    #toolbar-right {
        display: flex;
        justify-content: flex-end;
        padding-bottom: 20px;
    }

    #toolbar-right button {
        border-radius: 5px;
        font-weight: 500;
        padding-top: 10px;
        padding-bottom: 10px;
    }

    .modal-content1 {
        height: 23rem;
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 50%;
        overflow-y: auto;
        border-radius: 10px;
    }

    .botoes {
        display: flex;
        justify-content: end;
    }

    .horas_botoes {
        display: flex;
        justify-content: space-between;
    }

    b {
        color: #1e2d84;
    }

    select {
        width: 100%;
        height: 5rem;
        border-radius: 8px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        border: none;
        outline-color: #4086d1;
        margin-bottom: 1rem;
    }

    .datas {
        display: flex;
        justify-content: space-around;
    }

    .data_final {
        display: flex;
        flex-direction: column;
    }

    .x {
        font-size: 14px;
        padding: 4px;
    }

    .chk {
        margin-top: 2rem;
    }

    .footer {
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }

    .close {
        cursor: pointer;
    }

    /* Style the tab */
    .tab {
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
        background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
        background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
        display: none;
        border-radius: 8px;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    #container,
    #button-container {
        margin: 1em auto;
    }

    /* .choices__input.choices__input--cloned{
width: 100%!important;
} */
    #ts-control {
        font-size: 18px !important;
    }

    #ts-dropdown.single {
        font-size: 18px !important;
    }

    .ts-control {
        border: none;
    }


    .ts-dropdown,
    .ts-control,
    .ts-control input {
        font-size: 16px;
    }

    .fundoPreto_modalGeral {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 100px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        overflow-y: initial;
        background-color: rgb(0, 0, 0);
        background-color: rgba(0, 0, 0, 0.6);
    }

    .modalTamanho {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        overflow-y: auto;
        border-radius: 10px;
    }

    .loader3 {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .bars {
        width: 10px;
        height: 20px;
        margin: 0 2px;
        border-radius: 4px;
        animation: loader3 3s ease-in-out infinite;
    }

    .bar1 {
        background-color: #026cad;
        animation-delay: -0.8s;
    }

    .bar2 {
        background-color: #026cad;
        animation-delay: -0.7s;
    }

    .bar3 {
        background-color: #026cad;
        animation-delay: -0.6s;
    }

    .bar4 {
        background-color: #026cad;
        animation-delay: -0.5s;
    }

    .bar5 {
        background-color: #026cad;
        animation-delay: -0.4s;
    }

    .bar6 {
        background-color: #026cad;
        animation-delay: -0.3s;
    }

    .bar7 {
        background-color: #026cad;
        animation-delay: -0.2s;
    }

    .bar8 {
        background-color: #026cad;
        animation-delay: -0.1s;
    }

    .bar9 {
        background-color: #026cad;
        animation-delay: 0s;
    }

    .bar10 {
        background-color: #026cad;
        animation-delay: 0.1s;
    }

    @keyframes loader3 {
        0% {
            transform: scale(1);
        }

        20% {
            transform: scale(1, 2.32);
        }

        40% {
            transform: scale(1);
        }
    }

    .table.table-striped>tbody>tr:nth-of-type(even):not(.defgridheader):not(.gpagination):not(.selected-row)>td,
    table.table-striped>tbody>tr:nth-of-type(even):not(.defgridheader):not(.gpagination):not(.selected-row)>td {
        border-bottom: 1.5px solid #999;
    }

    .table.table-striped>tbody>tr:nth-of-type(odd):not(.defgridheader):not(.gpagination):not(.selected-row)>td,
    table.table-striped>tbody>tr:nth-of-type(odd):not(.defgridheader):not(.gpagination):not(.selected-row)>td {
        /* border-top: 2px solid #242424; */
        border-bottom: 1.5px solid #999;
    }
</style>
<div>
    <h1 style="text-align: center; font-weight: bold; margin-bottom: 3rem; color: black;">Plano de Entregas</h1>

    <div style="display: flex; align-items: center; justify-content: space-between;margin-bottom: 1.5rem;"><button
            class="btn_azul" onclick="openModalMainFiltro()" type="button"><i
                class="fa fa-filter"></i>&nbsp;Filtro</button><button class="btn_vermelho"
            onclick="openModal('modalInfo')" title="Informação Adicional" type="button"><i aria-hidden="true"
                class="fa fa-info-circle"></i></button></div>

    <div style="margin-bottom: 1.5rem;">
        <form id="filtroForm"><label style="margin-right: 1.5rem;"> <input name="filtro" type="checkbox"
                    value="Receber Material" /> Receber Material </label> <label style="margin-right: 1.5rem;"> <input
                    name="filtro" type="checkbox" value="Verificar Material" /> Verificar Material </label> <label
                style="margin-right: 1.5rem;"> <input name="filtro" type="checkbox" value="Informar Cliente" /> Informar
                Cliente </label> <label style="margin-right: 1.5rem;"> <input name="filtro" type="checkbox"
                    value="Enviar Material" /> Enviar Material </label><button class="btn_verde" onclick="getEntregas()"
                type="button">Aplicar Filtros</button></form>
    </div>

    <div id="grid-container" style="display: block;
		overflow-x: auto;">
        <table class="table table-striped" data-currentpage="1" data-ordercolumn="" data-ordertype="asc"
            data-pagesize="50" data-totalpages="1" data-totalrecords="20" id="DataGridEntregas" style="width: 100%;">
            <thead>
                <tr id="tableHeaderEntregas">
                    <th data-column="tabela1.nome" data-order="desc" scope="col" style="font-size: 16px;width: 18%;">
                        <b>Cliente</b><span></span></th>
                    <th data-column="tabela1.nref" data-order="desc" scope="col" style="font-size: 16px; width: 18%;">
                        <b>Processo</b><span></span></th>
                    <th data-column="tabela1.u_DTCONFCL" data-order="desc" scope="col"
                        style="font-size: 16px;width:20%;"><b>Datas Cliente</b><span></span></th>
                    <th data-column="tabela1.dataembarqueVer" data-order="desc" scope="col"
                        style="font-size: 16px;width:15%;"><b>Datas Forn.</b><span></span></th>
                    <th data-column="tabela1.PT" data-order="desc" scope="col" style="font-size: 16px;width:8%">
                        <b>P/T</b><span></span></th>
                    <th style="width:5%">&nbsp;</th>
                </tr>
                <tr id="filtrosEntregas" onkeypress="handleEnterKey(event)">
                    <th><input class="column-filterEntregas" oninput="checkCharsEntregas(this)" placeholder="Filtrar..."
                            style="background: #fff;" type="text" /></th>
                    <th><input class="column-filterEntregas" oninput="checkCharsEntregas(this)" placeholder="Filtrar..."
                            style="background: #fff;" type="text" /></th>
                    <th><input class="column-filterEntregas" oninput="checkCharsEntregas(this)" placeholder="Filtrar..."
                            style="background: #fff;" type="text" /></th>
                    <th><input class="column-filterEntregas" oninput="checkCharsEntregas(this)" placeholder="Filtrar..."
                            style="background: #fff;" type="text" /></th>
                    <th><input class="column-filterEntregas" oninput="getEntregas()" placeholder="Filtrar..."
                            style="background: #fff;" type="text" /></th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            <tbody id="tableBodyEntregas">
            </tbody>
        </table>
    </div>
</div>

<div class="modal-input-container" id="modal-Filtros">
    <div class="modal-content" style="width: 500px;"><span class="close" id="close"
            onclick="closeModalMainFiltro()">&times;</span>

        <div style="display: flex;flex-direction: column; padding: 2rem;"><label>At&eacute;(Conf.Cliente):</label>
            <input class="input" id="inp_ate" style="margin-bottom: 1rem;" type="date" />
            <label>Ordena&ccedil;&atilde;o:</label> <select class="select" id="inp_ordenacao"
                style="margin-bottom: 1rem;" type="text">
                <option>Cliente</option>
                <option>Data Confirma&ccedil;&atilde;o ao Cliente</option>
            </select> <label>Marca:</label> <select class="select" id="inp_marca" style="margin-bottom: 1rem;"
                type="text">
                <option></option>
                <option>DME</option>
                <option>MM</option>
                <option>MF</option>
                <option>VEGA</option>
                <option>US</option>
                <option>WR</option>
            </select></div>

        <div style="display: flex;align-items: center;justify-content: end;margin-top: 1rem;"><button class="btn_verde"
                id="novoStic" onclick="getEntregas()" type="button"><i aria-hidden="true"
                    class="fa fa-check"></i>&nbsp;Guardar</button></div>
    </div>
</div>

<div class="fundoPreto_modalGeral" id="loading" style="display: none;">
    <div class="modalTamanho" style="height: fit-content;width: 15%;">
        <div class="loader3" style="margin:auto">
            <div class="bars bar1">&nbsp;</div>

            <div class="bars bar2">&nbsp;</div>

            <div class="bars bar3">&nbsp;</div>

            <div class="bars bar4">&nbsp;</div>

            <div class="bars bar5">&nbsp;</div>

            <div class="bars bar6">&nbsp;</div>

            <div class="bars bar7">&nbsp;</div>

            <div class="bars bar8">&nbsp;</div>

            <div class="bars bar9">&nbsp;</div>

            <div class="bars bar10">&nbsp;</div>
        </div>
    </div>
</div>

<div class="fundoPreto_modalGeral" id="modalInfo">
    <div class="modalTamanho" style="width: 70%; height: fit-content;"><span class="close" id="close"
            onclick="closeModal('modalInfo')">&times;</span>

        <h1 style="text-align: center; font-weight: bold; margin-bottom: 2rem; color: black; font-size: 2.5rem;">Titulo
        </h1>
        <!-- duplicar a div, se precisares mais caixas  -->

        <div style="display: flex; align-items: stretch;justify-content: space-between;">
            <div
                style="box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px; padding: 1rem;margin-bottom: 1rem; width: 40%; display: flex;align-items: center;">
                <p style="margin-bottom: 1rem; font-weight: bold; font-size: 1.8rem;">Subtitulo</p>
            </div>

            <div style="box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px; padding: 1rem;margin-bottom: 1rem;width: 58%;">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
            </div>
        </div>

        <div style="display: flex; align-items: stretch;justify-content: space-between;">
            <div
                style="box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px; padding: 1rem;margin-bottom: 1rem; width: 40%; display: flex;align-items: center;">
                <p style="margin-bottom: 1rem; font-weight: bold; font-size: 1.8rem;">Subtitulo</p>
            </div>

            <div style="box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px; padding: 1rem;margin-bottom: 1rem;width: 58%;">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    //limpa cache
    if (!location.hash) {
        location.hash = "#reloading";
        location.reload(true);
    } else {
        location.hash = "#reloaded";
    }
    var buscarEntregas = 0;
    window.onload = function onLoadFunction() {
        $(".headerZone").hide();
        $(".dropdown-toggle btn btn-default btn-sm").hide();
        $("#OptionsRecordDropDown").hide();
        $(".navbar").hide();
    };
    function openModal(modal) { document.getElementById(modal).style.display = "block"; }

    function closeModal(modal) { document.getElementById(modal).style.display = "none"; }
    //Order the table
    let tableHeaderEntregas = document.getElementById("tableHeaderEntregas");
    let headersEntregas = tableHeaderEntregas.getElementsByTagName("th");
    for (let i = 0; i < headersEntregas.length; i++) {
        headersEntregas[i].addEventListener("click", function () {
            var column = $(this).data("column");
            var order = $(this).data("order");
            let dataGrid = document.getElementById("DataGridEntregas");

            if (order == "desc") {
                $(this).data("order", "asc");
                dataGrid.dataset.ordercolumn = column;
                dataGrid.dataset.ordertype = "ASC";
            } else {
                $(this).data("order", "desc");
                dataGrid.dataset.ordercolumn = column;
                dataGrid.dataset.ordertype = "DESC";
            }
            // neste for está o -1 porque o último th da tabela é apenas um spacer, e ele atrofiava porque não tinha valores
            // caso se adicionar novas colunas mudar isto (-1 no for) accordingly
            for (let j = 0; j < headersEntregas.length - 1; j++) {
                if (headersEntregas[j].getElementsByTagName("span")[0] != undefined) {
                    headersEntregas[j].getElementsByTagName("span")[0].innerHTML = "";
                }
            }
            this.getElementsByTagName("span")[0].innerHTML = order == "desc" ? "&#9650" : "&#9660";
            getEntregas();
        });
    }

    getEntregas();

    function checkCharsEntregas(element) {
        const filterValue = element.value;
        if (filterValue.length >= 3) {
            getEntregas();
        }
        if (filterValue == "") {
            getEntregas();
        }
    }

    function getEntregas() {
        closeModalMainFiltro();
        loading();
        const dataGrid = document.getElementById("DataGridEntregas");
        const columnFilter = document.getElementsByClassName("column-filterEntregas");
        const numberColumns = document.getElementById("DataGridEntregas").rows[0].cells.length;
        const ColFilter1 = columnFilter[0].value;
        const ColFilter2 = columnFilter[1].value;
        const ColFilter3 = columnFilter[2].value;
        const ColFilter4 = columnFilter[3].value;
        const ColFilter5 = columnFilter[4].value;

        let ate = document.getElementById("inp_ate").value;
        let ordenacaoInp = document.getElementById("inp_ordenacao").value;
        let marca = document.getElementById("inp_marca").value;
        if (ate == '') {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0'); // Months are zero-based
            const day = String(today.getDate()).padStart(2, '0');
            ate = `${year}${month}${day}`;
        }
        if (ordenacaoInp == '') {
            ordenacaoInp = 'Cliente';
        }
        if (marca == '') {
            marca = '';
        }
        //Get order
        let orderColumn = dataGrid.dataset.ordercolumn;
        const orderType = dataGrid.dataset.ordertype;
        //Get Grid Attributes
        const currentPage = dataGrid.dataset.currentpage;
        const pageSize = dataGrid.dataset.pagesize;
        var offset = (currentPage - 1) * pageSize;
        var paginacao = "";
        if (buscarEntregas != 0) {
            paginacao =
                ` OFFSET ` + offset.toString() +
                ` ROWS FETCH NEXT ` + pageSize.toString() + ` ROWS ONLY`;
        }
        if (dataGrid.dataset.ordercolumn != '') {
            dataGrid.dataset.ordercolumn = dataGrid.dataset.ordercolumn;
        } else if (ordenacaoInp == 'Data Confirmação ao Cliente') {
            orderColumn = `tabela1.u_DTCONFCL, 
                            tabela1.dtembarque,
                            tabela1.nome,		
                            tabela1.nref`;
        } else {
            orderColumn = `tabela1.nome,	
                            tabela1.u_DTCONFCL, 	
                            tabela1.dtembarque,
                            tabela1.nref`;
        }
        // Obter todos os checkboxes selecionados
        const checkboxes = document.querySelectorAll('input[name="filtro"]:checked');

        // Obter os valores selecionados
        const valoresFiltros = Array.from(checkboxes).map(checkbox => checkbox.value);
        let aux = '';
        if (valoresFiltros.length == 0) {
            aux = `'Receber Material', 'Verificar Material', 'Informar Cliente', 'Enviar Material'`;
        } else {
            for (let i = 0; i < valoresFiltros.length; i++) {
                if (i == 0) {
                    aux = `'${valoresFiltros[i]}'`;
                } else {
                    aux += `, '${valoresFiltros[i]}'`;
                }
            }
        }

        const Entregas = [];
        let params = {};
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const posto = urlParams.get("posto");
        const varMyQuery =
            `declare @ate date, @tipo nvarchar(55),@marca varchar(5);
		set @ate=cast('`+ ate + `' as date)
		set @tipo='`+ ordenacaoInp + `'
		set @marca='`+ marca + `'
		--Até (Conf.Cliente) : Data                     
		--Ordenação : Cliente,Data Confirmação ao Cliente
		--Marca : ,DME,MM,MF,VEGA,US,WR
		-- set @ate=getdate()
		-- set @tipo='Cliente'
		-- set @marca=''
		
			select		
		    clienteBloqueado=(
			    select count(ccstamp) 
				from cc (nolock)
					where cc.no=NumCli
					and dateadd(dd,(select cl.alimite as dias from cl(nolock) where cl.no=NumCli and cl.estab=0),cc.datalc)<getdate() 
					and  (case when cc.moeda='PTE OU EURO' or cc.moeda=space(11) then (cc.edeb-cc.edebf)-(cc.ecred-cc.ecredf) else (cc.debm-cc.debfm)-(cc.credm-cc.credfm) end) > (case when cc.moeda='PTE OU EURO' or cc.moeda=space(11) then 0.010000 else 0 end)	
			    ),
			'Até : '+ convert(varchar,convert(datetime,@ate,104),104) + '   Ordenação : '+ @tipo as ordenacao,
            --(case when ltrim(rtrim(convert(varchar,cast(dtembarque as date),104)))='' then '--' else
            --    (Case when ltrim(rtrim((case when verif is null then '' else convert(char,verif,104) end)))='' then 'Receber Material' else
            --        (case when ltrim(rtrim((case when pronto is null then '' else convert(char,pronto,104) end) ))='' then  'Verificar Material' else
            --            (case when inf=0 then  'Informar Cliente' else
            --                'Enviar Material'
            --            end)
            --        end)
            --    end)
            --end )as Estado,
            (case when inf=1 then 
                    'Enviar Material'
                else 
                        (case when inf=0 and ltrim(rtrim((case when Verif is null then '' else convert(char,Verif,104) end)))<>'' and ltrim(rtrim(convert(char,pronto,104)))<>'' then 
                            (case when infexiste=0 then 'Enviar Material' else 'Informar Cliente' end)
                        else 
                            (case when ((ltrim(rtrim(convert(varchar,cast(dtembarque as date),104)))<>'' and ltrim(rtrim((case when Verif is null then '' else convert(char,Verif,104) end)))<>'')
                                        or
                                        (ltrim(rtrim((case when Verif is null then '' else convert(char,Verif,104) end)))='' and estosck=1))
                                then
                                    'Verificar Material'
                                else                                                                                                                      
                                    'Receber Material'                                                                                                                         
                                end)
                        end)
                 end) as Estado,
			case when u_DTCONFCL <=@ate then nome else '___'+ltrim(rtrim(nome)) end as Nome,
			Molde,
			nref,
			convert(varchar, PrazoPedCliente, 104) as PrazoPedCliente, 
			convert(varchar, u_DTCONFCL, 104) as u_DTCONFCL, 
			LocalEntrega,
			ClienteEntrega,
			case when pronto is null then '' else convert(char,pronto,104) end as pronto,
			case when Verif is null then '' else convert(char,Verif,104) end as Verif,
			HOLD,
			ed,
			pt,
			inf,
            infexiste,
			Class,
			atrasado,
			entregarcom,
			u_obsproc,
			codprod,
			CASE 
				WHEN ClassData <  2 THEN '1'  
				WHEN ClassData >= 2 and ClassData < 5 THEN '2'  
				WHEN ClassData >= 5 and ClassData < 10 THEN '3'  
				WHEN ClassData >= 10 THEN '4'       
			end as ClassData,
			dtembarque,
			convert(varchar,cast(dtembarque as date),104) as dataembarqueVer,
			estosck
		from
			(
					select 
						bo.nome as Nome,
						bo.no as NumCli,
						bo2.u_RefCliMl as Molde,			
						'E' + Ltrim(str(bo.obrano)) + '-' + bo3.u_familia + '-'+bo.tabela1  as nref,
						bo.dataopen as PrazoPedCliente,
						bo3.u_DTCONFCL as u_DTCONFCL, --adicionei
						case when dateadd(day, 30, bo.dataopen) < getdate() then 1 else 0 end as atrasado,				
						(case when 
							(select count(*) FROM szadrs where ltrim(rtrim(szadrsdesc)) = ltrim(rtrim(bo2.descar))) > 0
						then 
							(select local FROM szadrs where szadrsdesc=bo2.descar)  
						else 					
							(case when 
								(ltrim(rtrim(bo2.descar)) = 'Morada do Cliente' or ltrim(rtrim(bo2.descar)) = 'É definido nos parâmetros ') 
							then 
								bo2.local 
							else 
								bo2.descar 
							end) 
						end)
						as LocalEntrega,
						(					
							(case when 
								(ltrim(rtrim(bo2.descar)) = ltrim(rtrim(bo.nome)) or ltrim(rtrim(bo2.descar)) = 'Morada do Cliente' or ltrim(rtrim(bo2.descar)) = 'É definido nos parâmetros ') 
							then 
								''
							else 
								bo2.descar 
							end) 
						)
						as ClienteEntrega,

						--(case when (trf65.no is not null or trf65.no=65) then 
						--	(select max(trfvrf.Datafim) from u_tarefas as trfvrf where trfvrf.no=80 and trfvrf.fechada=1 and trfvrf.oristamp=bo.bostamp and trfvrf.repeticao=trf95.repeticao)
						--else
						--	(select max(trfvrf.dataini) from u_tarefas as trfvrf where trfvrf.no=80 and trfvrf.fechada=0 and trfvrf.oristamp=bo.bostamp and trfvrf.repeticao=trf95.repeticao)
						--end)
						--as pronto,
                        (
                            (select max(trfvrf.Datafim) from u_tarefas as trfvrf where trfvrf.no=80 and trfvrf.fechada=1 and trfvrf.oristamp=bo.bostamp and trfvrf.repeticao=trf95.repeticao)
                        )
                        as pronto,
						(case when (trf65.no is not null or trf65.no=65) then 
							(select max(trfrec.Datafim) from u_tarefas as trfrec where trfrec.no=70 and trfrec.fechada=1 and trfrec.oristamp=bo.bostamp and trfrec.repeticao=trf95.repeticao) 
						else
							(select max(trfvrf.datafim) from u_tarefas as trfvrf where trfvrf.no=80 and trfvrf.fechada=1 and trfvrf.oristamp=bo.bostamp and trfvrf.repeticao=trf95.repeticao)
						end)
						as Verif,
						(case when exists(select bi.u_direta from bi where bi.bostamp = bo.bostamp and bi.u_direta = 1) then 1 else 0 end) as ed,
						(case when exists(select * from u_tarefas where u_tarefas.no=900 and u_tarefas.oristamp=bo.bostamp and u_tarefas.fechada=0) then 1 else 0 end) as HOLD,				
			
						(case when 1 >= (select count(*) from u_tarefas as trfP where trfP.no=65 and trfP.oristamp=bo.bostamp ) then 'T' else (case when trf65.repeticao = (select max(trfP.repeticao) from u_tarefas as trfP where trfP.no=65 and trfP.oristamp=bo.bostamp ) then 'T' else 'P' end) end) as PT,
				
						(case when exists(select * from u_tarefas as trfinf where trfinf.no=81 and trfinf.oristamp=bo.bostamp and trfinf.fechada=1 and trfinf.repeticao=trf95.repeticao) then 1 else 0 end) as inf,
                        (case when exists(select * from u_tarefas as trfinf where trfinf.no=81 and trfinf.oristamp=bo.bostamp and trfinf.repeticao=trf95.repeticao) then 1 else 0 end) as infexiste,
						SUBSTRING(cl.tipo,0, CHARINDEX('-',cl.tipo)) as Class,
						BO3.U_ENTRCOM as entregarcom,
						bo.marca as codprod,
						bo3.u_obsproc,
						DATEDIFF(day,getdate(),BO.dataopen) as ClassData,					
						isnull((case when ltrim(rtrim(trf65.resposta))='' then 
							convert(varchar,ltrim(rtrim(trf65.datafim)),112) 
							else 
							right(ltrim(rtrim(trf65.resposta)),4)+substring(ltrim(rtrim(trf65.resposta)),4,2)+left(ltrim(rtrim(trf65.resposta)),2) 
							end),isnull(convert(varchar,trf80.dataini,112),convert(varchar,trf95.dataini,112))) 
							as dtembarque,
						(case when (trf65.no is not null or trf65.no=65) then 0 else 1 end) as estosck
					from 
						bo(nolock) 
						left join bo2(nolock) on bo.bostamp=bo2.bo2stamp 
						left join bo3(nolock) on bo.bostamp=bo3.bo3stamp 
						left join cl(nolock) on bo.no=cl.no and cl.estab=0 
						left join u_tarefas(nolock) as trf95 on bo.bostamp=trf95.oristamp and trf95.no=(case when bo.no=619 then 80 else 95 end) 
						left join u_tarefas(nolock)  as trf65 on bo.bostamp=trf65.oristamp and trf65.no=65 and trf65.repeticao=(case when trf95.repeticao is null then 0 else trf95.repeticao end)	
						left join u_tarefas(nolock)  as trf80 on bo.bostamp=trf80.oristamp and trf80.no=80 and trf80.repeticao=(case when trf95.repeticao is null then 0 else trf95.repeticao end)	 
					where 
						bo.ndos=11 and (select count(tarefas2.trfstamp) from u_tarefas(nolock) as tarefas2 where tarefas2.oristamp=bo.bostamp and tarefas2.fechada=0)>0 and
						bo3.u_familia=(case when @marca <> '' then @marca else bo3.u_familia end) 
						and 0=(case when trf95.no is null then 0 else trf95.fechada end)
		
						and 1=(case when trf65.no is null then (case when (trf80.no is null or (trf80.no is not null)) then 1 else 0 end)  else trf65.fechada end) 
						and
						(
							bo.dataopen <= @ate
							or
							(bo.dataopen >= @ate
								and 
								(
										select 
											count(booutro.bostamp)
										from
											bo as booutro(nolock) 
											left join u_tarefas(nolock) as trf952 on booutro.bostamp=trf952.oristamp and trf952.no=(case when booutro.no=619 then 80 else 95 end)
											left join u_tarefas(nolock)  as trf652 on booutro.bostamp=trf652.oristamp and trf652.no=65 and trf652.repeticao=(case when trf952.repeticao is null then 0 else trf952.repeticao end)	
											left join u_tarefas(nolock)  as trf802 on bo.bostamp=trf802.oristamp and trf802.no=80 and trf802.repeticao=(case when trf952.repeticao is null then 0 else trf952.repeticao end)
										where
											booutro.ndos=11 and  (select count(tarefas2.trfstamp) from u_tarefas(nolock) as tarefas2 where tarefas2.oristamp=booutro.bostamp and tarefas2.fechada=0)>0 and
											booutro.no=bo.no and 
								
											0=(case when trf952.no is null then 0 else trf952.fechada end) 
								
											and 1=(case when trf652.no is null then (case when (trf802.no is null or (trf802.no is not null)) then 1 else 0 end)  else trf652.fechada end) 
											and booutro.dataopen <= @ate
								)>0
							)
						)

                union all

                --PATS
                select 
					pa.nome as Nome,
					pa.no as NumCli,
					pa.serie2 as Molde,			
					'R' + Ltrim(str(pa.nopat)) + '-' + pa.u_marca + '-'+pa.u_refprod  as nref
					,pa.u_dtfimcl as PrazoPedCliente,
					pa.u_dtfimcl as u_DTCONFCL,				
                    0 as atrasado,						
					'' as LocalEntrega,
					'' as ClienteEntrega
					,trf57.datafim as pronto,
					 trf57.datafim  as Verif,
					0 as ed,
					--tarefa 900 processos -HOLD  
					(case when exists(select * from u_tarefas where u_tarefas.no=900 and u_tarefas.oristamp=pa.pastamp and u_tarefas.fechada=0) then 1 else 0 end) as HOLD,	
					'T' as PT,
					--tarefa 81 processos -Informar o cliente
					--tarefa 80 pats - Informar cliente da reparação concluída  
					(case when exists(select * from u_tarefas as trfinf where trfinf.no=80 and trfinf.oristamp=pa.pastamp and trfinf.fechada=1 and trfinf.repeticao=0) then 1 else 0 end) as inf,
                    (case when exists(select * from u_tarefas as trfinf where trfinf.no=80 and trfinf.oristamp=pa.pastamp  and trfinf.repeticao=0) then 1 else 0 end) as infexiste,
					SUBSTRING(cl.tipo,0, CHARINDEX('-',cl.tipo)) as Class,
					'' as entregarcom,
					'' as codprod,
					'TAREFA '
					+(case when trf40.no is null then '' else ltrim(str(trf40.no))+' '+ltrim(trf40.descricao) end)
					+(case when trf57.no is null then '' else ltrim(str(trf57.no))+' '+ltrim(trf57.descricao) end)
					+(case when trf79.no is null then '' else ltrim(str(trf79.no))+' '+ltrim(trf79.descricao) end)
					+(case when trf150.no is null then '' else ltrim(str(trf150.no))+' '+ltrim(trf150.descricao) end)
					+' OBS:' +cast(pa.solucao as varchar(200))
					as u_obsproc, 
					DATEDIFF(day,getdate(),pa.u_dtfimcl) as ClassData,					
					@ate as dtembarque,					
					0 as estosck
				from 
					pa(nolock) 
					left join cl(nolock) on pa.no=cl.no and cl.estab=0 
					--tarefa 40 pats - Envio para o fornecedor
					left join u_tarefas(nolock)  as trf40 on pa.pastamp=trf40.oristamp and trf40.no=40 and trf40.repeticao=0 and trf40.fechada=0
					--tarefa 79 pats - Envio de equipamento reparado ao cliente | tarefa 74 pats - Envio de equipamento não reparado ao cliente 
					left join u_tarefas(nolock)  as trf79 on pa.pastamp=trf79.oristamp and (trf79.no=79 or trf79.no=74)  and trf79.repeticao=0 and trf79.fechada=0
					--tarefa 57 pats - Receção de equipamento reparado do fornecedor | tarefa 59 pats - Receção de equipamento não reparado no fornecedor      
					left join u_tarefas(nolock)  as trf57 on pa.pastamp=trf57.oristamp and (trf57.no=57 or trf57.no=59) and trf57.repeticao=0 and trf57.fechada=0
					--tarefa 150 pats - Envio de material para testes                                                                       
					left join u_tarefas(nolock)  as trf150 on pa.pastamp=trf150.oristamp and trf150.no=150 and trf150.repeticao=0 and trf150.fechada=0
				where 
					(select count(tarefas2.trfstamp) from u_tarefas(nolock) as tarefas2 where tarefas2.oristamp=pa.pastamp and tarefas2.no in (40,57,59,74,79,150) and tarefas2.fechada=0)>0 
					and pa.U_MARCA=(case when @marca <> '' then @marca else pa.U_MARCA end) 
					and (
							0=(case when trf40.no is null then 1 else trf40.fechada end) 
							or
							0=(case when trf79.no is null then 1 else trf79.fechada end) 
							or 
							0=(case when trf57.no is null then 1 else trf57.fechada end) 
							or 
							0=(case when trf150.no is null then 1 else trf150.fechada end)
						)
				
					and
					(
						pa.u_dtfimcl <= @ate
						or
						(pa.u_dtfimcl >= @ate
							and 
							(
									select 
										count(paoutro.pastamp)
									from
										pa as paoutro(nolock) 										
										--tarefa 40 pats - Envio para o fornecedor
										left join u_tarefas(nolock)  as trf402 on paoutro.pastamp=trf402.oristamp and trf402.no=40 and trf402.repeticao=0 and trf402.fechada=0
										--tarefa 79 pats - Envio de equipamento reparado ao cliente | tarefa 74 pats - Envio de equipamento não reparado ao cliente 
										left join u_tarefas(nolock)  as trf792 on paoutro.pastamp=trf792.oristamp and (trf792.no=79 or trf792.no=74)  and trf792.repeticao=0 and trf792.fechada=0
										--tarefa 57 pats - Receção de equipamento reparado do fornecedor | tarefa 59 pats - Receção de equipamento não reparado no fornecedor      
										left join u_tarefas(nolock)  as trf572 on paoutro.pastamp=trf572.oristamp and (trf572.no=57 or trf572.no=59) and trf572.repeticao=0 and trf572.fechada=0
										--tarefa 150 pats - Envio de material para testes       
										left join u_tarefas(nolock)  as trf1502 on paoutro.pastamp=trf1502.oristamp and (trf1502.no=150) and trf1502.repeticao=0 and trf1502.fechada=0
									where
										(select count(tarefas2.trfstamp) from u_tarefas(nolock) as tarefas2 where tarefas2.oristamp=paoutro.pastamp and tarefas2.no in (40,57,59,74,79,150) and tarefas2.fechada=0)>0 and
										paoutro.no=pa.no 									
										and
										(
										0=(case when trf402.no is null then 1 else trf402.fechada end) 
										or 
										0=(case when trf792.no is null then 1 else trf792.fechada end) 
										or 
										0=(case when trf572.no is null then 1 else trf572.fechada end) 
										or 
										0=(case when trf1502.no is null then 1 else trf1502.fechada end) 
										)																		
										and paoutro.u_dtfimcl <= @ate
							)>0
						)
					)
				
		) as tabela1
	where	
		(tabela1.ClienteEntrega like '%` + ColFilter1 + `%' or tabela1.Nome like '%` + ColFilter1 + `%') and
		(tabela1.nref like '%` + ColFilter2 + `%' or tabela1.Molde like '%` + ColFilter2 + `%' or tabela1.codprod like '%` + ColFilter2 + `%') and
		(convert(varchar, u_DTCONFCL, 104) like '%` + ColFilter3 + `%' or convert(varchar, PrazoPedCliente, 104) like '%` + ColFilter3 + `%' or tabela1.localentrega like '%` + ColFilter3 + `%') and
		(convert(varchar,cast(dtembarque as date),104) like '%` + ColFilter4 + `%' or convert(varchar, pronto, 104) like '%` + ColFilter4 + `%' or tabela1.verif like '%` + ColFilter4 + `%' or tabela1.entregarCom like '%` + ColFilter4 + `%') and
		(tabela1.PT like '%` + ColFilter5 + `%' or tabela1.ed like '%` + ColFilter5 + `%' or tabela1.class like '%` + ColFilter5 + `%' or tabela1.inf like '%` + ColFilter5 + `%') and
		(case when ltrim(rtrim(convert(varchar,cast(dtembarque as date),104)))='' then '--' else
                (Case when ltrim(rtrim((case when verif is null then '' else convert(char,verif,104) end)))='' then 'Receber Material' else
                    (case when ltrim(rtrim((case when pronto is null then '' else convert(char,pronto,104) end) ))='' then  'Verificar Material' else
                        (case when inf=0 then  'Informar Cliente' else
                            'Enviar Material'
                        end)
                    end)
                end)
            end )in  (` + aux + `) and
	tabela1.dtembarque is not null and tabela1.dtembarque<>'19000101'
	ORDER BY ` + orderColumn + ` ` + orderType + ``;
        params.id = "selecttojson";
        params.select = varMyQuery;
        $.ajax({
            type: "POST",
            url: "../api/code/run",
            async: true,
            data: JSON.stringify(params),
            contentType: "application/json",
        }).done(function (result, textStatus, jqXHR) {
            try {
                result = result.replaceAll('\n', ' ').replaceAll('\t', ' ').replaceAll('\r', ' ')
                resposta = JSON.parse(result);
            } catch {
                resposta = JSON.parse('{"Dados":[]}');
            }
            for (var i = 0; i < resposta.Dados.length; ++i) {
                Entregas.push(resposta.Dados[i]);
            }
            buildEntregas(Entregas);
            loading();
        });
    }

    function buildEntregas(data) {
        let tBody = document.getElementById("tableBodyEntregas");
        tBody.innerHTML = "";
        let row = "";
        for (var i = 0; i < data.length; i++) {
            var classe = $.trim(data[i].Class)
            var classData = $.trim(data[i].ClassData)
            var clienteEntrega = $.trim(data[i].ClienteEntrega)
            var varHOLD = $.trim(data[i].HOLD)
            var localEntrega = $.trim(data[i].LocalEntrega)
            var molde = $.trim(data[i].Molde)
            var nome = $.trim(data[i].Nome)

            var prazoPedCliente = $.trim(data[i].PrazoPedCliente)
            var verif = $.trim(data[i].Verif)
            var atrasado = $.trim(data[i].atrasado)
            var clienteBloqueado = $.trim(data[i].clienteBloqueado)
            var codprod = $.trim(data[i].codprod)

            var dataembarqueVer = $.trim(data[i].dataembarqueVer)
            var ed = $.trim(data[i].ed)
            var dtembarque = $.trim(data[i].dtembarque)
            var entregarCom = $.trim(data[i].entregarcom)
            var estosck = $.trim(data[i].estosck)
            var inf = $.trim(data[i].inf)
            var nref = $.trim(data[i].nref)
            var ordenacao = $.trim(data[i].ordenacao)
            var pronto = $.trim(data[i].pronto)
            var pt = $.trim(data[i].pt)
            var u_DTCONFCL = $.trim(data[i].u_DTCONFCL)
            var u_obsproc = $.trim(data[i].u_obsproc)
            var Estado = $.trim(data[i].Estado)
            row += "<tr style=\"background:" + (varHOLD == '0' ? 'white' : 'rgb(255,66,66)') + "\"> "
            row += "<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;\"><span style=\"font-weight:bolder;\">Cliente: " + nome + "</span><br>Cliente Entrega: " + clienteEntrega + "<span style=\" float:right; color:" + (clienteBloqueado == '0' ? 'black' : 'red') + "; font-weight:bolder\";>" + (clienteBloqueado > 0 ? 'B' : '') + "</span>" + getStatusCor(Estado) + "</td>"
            row += `<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;text-align:center;\"><table style=\"border-collapse: collapse;border:none;\">
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 40%;\">NREF:&nbsp;</td><td style="text-align:left; font-weight: 400;border-collapse: collapse;border:none;">` + nref + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 40%;\">Molde:&nbsp; </td><td style=" text-align:left; font-weight: 400;border-collapse: collapse;border:none;">` + molde + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 40%;\">Cod.Prod.:&nbsp; </td><td style="text-align:left;font-weight: 400;border-collapse: collapse;border:none;">` + codprod + `</td></tr></table>
                    </td>`;
            row += `<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;text-align:center;\"><table style=\"border-collapse: collapse;border:none;\">
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 40%;\">Data Conf.:&nbsp;</td><td style="text-align:left; font-weight: 400;border-collapse: collapse;border:none;">`  + u_DTCONFCL.slice(0, 10) + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 40%;\">Ped.Cliente:&nbsp; </td><td style=" text-align:left; font-weight: 400;border-collapse: collapse;border:none;">` + prazoPedCliente.slice(0, 10) + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 40%;\">Local:&nbsp; </td><td style="text-align:left;font-weight: 400;border-collapse: collapse;border:none;">` + localEntrega + `</td></tr></table>
                    </td>`;
            row += `<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;text-align:center;\">
                <table style=\"border-collapse: collapse;border:none;\">
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 50%;\">Data Emb.:&nbsp;</td><td style="text-align:left; font-weight: 400;border-collapse: collapse;border:none;">` + (estosck == 1 ? 'STOCK' : dataembarqueVer) + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 50%;\">Verif:&nbsp; </td><td style=" text-align:left; font-weight: 400;border-collapse: collapse;border:none;">`+ verif + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 50%;\">Pronto:&nbsp; </td><td style="text-align:left;font-weight: 400;border-collapse: collapse;border:none;">`  + pronto + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 50%;\">Entregar Com.:&nbsp; </td><td style="text-align:left;font-weight: 400;border-collapse: collapse;border:none;">` + entregarCom + `</td></tr>
                </table>
            </td>`;
            row += `<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;text-align:center;\">
                <table style=\"border-collapse: collapse;border:none;\">
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 60%;\">P/T:&nbsp;</td><td style="text-align:left; font-weight: 400;border-collapse: collapse;border:none;">` + pt + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 60%;\">E.D:&nbsp; </td><td style=" text-align:left; font-weight: 400;border-collapse: collapse;border:none;">`+ (ed != 0 ? "ED" : "") + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 60%;\">Class.:&nbsp; </td><td style="text-align:left;font-weight: 400;border-collapse: collapse;border:none;">`  + classe + `</td></tr>
                        <tr style=\"border-collapse: collapse;border:none;\"><td style=\"font-weight:bolder; text-align:right;border-collapse: collapse;border:none;width: 60%;\">Inf:&nbsp; </td><td style="text-align:left;font-weight: 400;border-collapse: collapse;border:none;">`  + (inf != 0 ? '<i class=\"fa fa-check\" style=\"color: green;\"></i>' : "") + `</td></tr>
                </table>
            </td>`;
            // row += "<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;text-align:center; width:20%\"><div style=\"display:flex;align-items: center;justify-content: center;\"><div style=\"display:flex;flex-direction: column;align-items: flex-end;\"><b>Data Conf.:&nbsp;</b><b>Ped.Cliente:&nbsp</b><b>Local:&nbsp</b></div><div  style=\"display:flex;flex-direction: column;align-items: flex-start;\"><span>" + u_DTCONFCL.slice(0, 10) + "</span><span>" + prazoPedCliente.slice(0, 10) + "</span><span>" + localEntrega + "</span></div></div></td>"
            //row += "<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;text-align:center;\">Data Emb.:" + (estosck == 1 ? 'STOCK' : dataembarqueVer) + "<br>Pronto: " + pronto + "<br>Verif: " + verif + "<br>Entregar Com.: " + entregarCom + "</td>"
            // row += "<td style=\"border-bottom:0.7px solid #999; border-collapse: collapse;text-align:center; \">P/T: " + pt + "<br>E.D: " + (ed != 0 ? "ED" : "") + "<br>Class.: " + classe + "<br>Inf: " + (inf != 0 ? '<i class=\"fa fa-check\" style=\"color: green;\"></i>' : "") + "</td>"
            switch (Estado) {
                case 'Receber Material':
                    cor = 'red';
                    break;
                case 'Verificar Material':
                    cor = 'orange';
                    break;
                case 'Informar Cliente':
                    cor = 'blue';
                    break;
                case 'Enviar Material':
                    cor = 'green';
                    break;
                default:
                    cor = 'black';
                    break;
            }

            row += `<td style=\"text-align: center;\"><button class=\"btn_cor\" type=\"button\" style=\"padding: 0px 10px;font-size: 24px;background:` + cor + `;border: 1px solid ` + cor + ` \" onclick=\"openModalChecks()\"><i class="fa fa-caret-square-o-right" aria-hidden="true"></i></button></td>`
            row += "</tr>"
        }
        tBody.innerHTML += row;
    }

    function getStatusCor(estado) {
        //estado = Receber Material vermelho
        //estado = Verficar Material laranja
        //estado = Informar Cliente azul
        //estado = Enviar Material verde
        let string = '';
        switch (estado) {
            case 'Receber Material':
                cor = 'red';
                break;
            case 'Verificar Material':
                cor = 'orange';
                break;
            case 'Informar Cliente':
                cor = 'blue';
                break;
            case 'Enviar Material':
                cor = 'green';
                break;
            default:
                cor = 'black';
                break;
        }
        string = "<br /><span style=\" float:left; font-weight:bold;\">Estado:&nbsp;</span><span style=\" float:left; color:" + cor + "; font-weight:bold;\">" + estado + "</span>";
        return string;
    }

    function loading() {
        document.getElementById("loading").style.display = (document.getElementById("loading").style.display == 'none' ? 'block' : 'none')
    }

    function openModalMainFiltro() {
        document.getElementById('modal-Filtros').style.display = 'block';
        //give the input todays date
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0'); // Months are zero-based
        const day = String(today.getDate()).padStart(2, '0');
        const date = `${year}-${month}-${day}`;
        document.getElementById("inp_ate").value = date;
    }

    function closeModalMainFiltro() {
        document.getElementById('modal-Filtros').style.display = 'none';
    }


    function handleEnterKey(e) {
        if (e.keyCode == 13) {
            // enter pressed
            try {
                e.preventDefault ? e.preventDefault() : (e.returnValue = false);
                //DO ALTERNATE ACTION RATHER THAN SEND ENTER
                changePageSizeEntregas();
            } catch (err) {
                console.log(err.message);
            }
        }
    }
</script>